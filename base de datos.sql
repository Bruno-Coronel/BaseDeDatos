CREATE DATABASE Comercio;

USE Comercio;

CREATE TABLE PRODUCTOS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(100),
    MEDIDA_ID INT,
    FOREIGN KEY (MEDIDA_ID) REFERENCES MEDIDAS(ID)
);

CREATE TABLE MEDIDAS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(100)
);

CREATE TABLE STOCK (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    PRODUCTO_ID INT,
    STOCK_ACTUAL DECIMAL,
    FOREIGN KEY (PRODUCTO_ID) REFERENCES PRODUCTOS(ID)
);

CREATE TABLE PRECIO_POR_UNIDAD (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    PRODUCTO_ID INT,
    PRECIO DECIMAL,
    MEDIDA_ID INT,
    FOREIGN KEY (PRODUCTO_ID) REFERENCES PRODUCTOS(ID),
    FOREIGN KEY (MEDIDA_ID) REFERENCES MEDIDAS(ID)
);

CREATE TABLE VENTAS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    PRODUCTO_ID INT,
    FECHA DATE,
    PRECIO_TOTAL DECIMAL,
    CANTIDAD DECIMAL,   
    MEDIDA_ID INT,
    FOREIGN KEY (PRODUCTO_ID) REFERENCES PRODUCTOS(ID),
    FOREIGN KEY (MEDIDA_ID) REFERENCES MEDIDAS(ID)
)

INSERT INTO PRODUCTOS (NOMBRE, MEDIDA_ID) VALUES ("Arroz", 1),
("Azucar", 1),
("Cafe", 1),
("Leche", 2),
("Harina", 1),
("Sal", 1),
("Aceite", 2),
("Yerba", 1),
("Vino", 2);

INSERT INTO MEDIDAS (NOMBRE) VALUES ("kg"),
("lt");

INSERT INTO STOCK (PRODUCTO_ID, STOCK_ACTUAL) VALUES (1, 100),
(2, 100),
(3, 100),
(4, 100),
(5, 100),
(6, 100),
(7, 100),
(8, 100),
(9, 100);

INSERT INTO PRECIO_POR_UNIDAD (PRODUCTO_ID, PRECIO, MEDIDA_ID) VALUES (1, 1000, 1),
(2, 490, 1),
(3, 500, 1),
(4, 700, 2),
(5, 2000, 1),
(6, 1500, 1),
(7, 1320, 2),
(8, 1000, 1),
(9, 1200, 2);

INSERT INTO VENTAS (PRODUCTO_ID, FECHA, PRECIO_TOTAL, CANTIDAD, MEDIDA_ID) VALUES 
(1, "2024-08-09", 100000, 100, 1),
(2, "2024-10-11", 49000, 100, 1),
(3, "2024-01-23", 50000, 100, 1),
(4, "2024-06-06", 70000, 100, 2),
(5, "2024-05-15", 200000, 100, 1),
(6, "2024-02-22", 150000, 100, 1),
(7, "2024-12-12", 132000, 100, 2),
(8, "2024-11-04", 100000, 100, 1),
(9, "2024-09-10", 120000, 100, 2);